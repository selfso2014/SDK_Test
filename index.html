<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>SeeSo Reading Game â€“ Debug</title>
  <meta name="description" content="SeeSo Eye Tracking ê¸°ë°˜ ë¦¬ë”© ê²Œì„ (iPhone í¬ë˜ì‹œ ë””ë²„ê·¸ìš©)" />

  <!-- â”€â”€ Cross-Origin Isolation (SharedArrayBuffer for WASM threads) â”€â”€ -->
  <!-- ë°°í¬ ì„œë²„ì—ì„œëŠ” COOP / COEP í—¤ë”ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨. ë¡œì»¬ fallback: coi-serviceworker.js -->

  <link rel="stylesheet" href="style.css" />
</head>
<body>

<div id="app">

  <!-- â”€â”€ Header Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="header-bar">
    <h1>ğŸ‘ï¸ SeeSo Reading Game <span style="font-size:10px;color:#555;font-weight:400;">[DEBUG]</span></h1>
    <div id="header-stats">
      <span>Gaze: <b id="gaze-fps">0</b> Hz</span>
      <span>
        <button
          id="btn-download-log"
          style="background:#1a1a3a;color:#88aaff;border:1px solid #334;border-radius:4px;padding:2px 8px;cursor:pointer;font-size:11px;"
        >ğŸ“¥ ë¡œê·¸ ì €ì¥</button>
      </span>
    </div>
  </div>

  <!-- â”€â”€ Section: IDLE (ì‹œì‘ í™”ë©´) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="section-idle" class="game-section active">
    <div class="idle-logo">ğŸ“–</div>
    <div class="idle-title">SeeSo ë¦¬ë”© ê²Œì„</div>
    <div class="idle-subtitle">Eye Tracking Reading Test Â· Debug Build</div>

    <div class="idle-badges">
      <span class="badge">ğŸ‘ï¸ 1-Point Calibration</span>
      <span class="badge">ğŸ“Š Memory Monitor</span>
      <span class="badge">ğŸ iOS Debug Mode</span>
    </div>

    <p class="idle-desc">
      ì‹œì„  ì¶”ì  ê¸°ìˆ ì„ ì´ìš©í•˜ì—¬ ì§€ë¬¸ì„ ì½ê³  ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”.<br />
      ì¹´ë©”ë¼ ê¶Œí•œê³¼ HTTPS í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.
    </p>

    <div style="margin-top:8px;">
      <button id="btn-start" class="btn btn-primary">
        ğŸš€ ê²Œì„ ì‹œì‘
      </button>
    </div>
  </section>

  <!-- â”€â”€ Section: LOADING (SDK ì´ˆê¸°í™” / ì¹´ë©”ë¼) â”€â”€â”€â”€ -->
  <section id="section-loading" class="game-section">
    <div class="loading-spinner"></div>
    <div class="loading-label">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”</div>
    <div class="loading-hint">AI ëª¨ë¸ì„ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤.<br />ì²« ì‹¤í–‰ ì‹œ ë„¤íŠ¸ì›Œí¬ ì†ë„ì— ë”°ë¼ 30ì´ˆê¹Œì§€ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
  </section>

  <!-- â”€â”€ Section: CALIBRATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="section-calibration" class="game-section">
    <!-- ì§€ì‹œ ë©”ì‹œì§€ -->
    <div id="cal-instruction">
      <h2>ğŸ¯ ì‹œì„  ìº˜ë¦¬ë¸Œë ˆì´ì…˜</h2>
      <p>í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” ì ì„ ì‘ì‹œí•´ ì£¼ì„¸ìš”</p>
    </div>

    <!-- ì§„í–‰ë¥  ë°” -->
    <div id="cal-progress-wrap">
      <div id="cal-progress-track">
        <div id="cal-progress-bar"></div>
      </div>
      <div id="cal-progress-text">0%</div>
    </div>

    <!-- ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í¬ì¸íŠ¸ -->
    <div id="cal-dot"></div>
  </section>

  <!-- â”€â”€ Section: READING (ì§€ë¬¸ ì½ê¸°) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="section-reading" class="game-section">
    <h2 id="reading-title" style="font-size:20px;font-weight:700;color:#58a6ff;text-align:center;"></h2>

    <div id="reading-text-wrap">
      <p id="reading-text"></p>
    </div>

    <div class="reading-actions">
      <button id="btn-go-quiz" class="btn btn-primary">
        ë‹¤ ì½ì—ˆì–´ìš” â†’ ë¬¸ì œ í’€ê¸°
      </button>
    </div>
  </section>

  <!-- â”€â”€ Section: QUIZ (ë¬¸ì œ í’€ê¸°) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="section-quiz" class="game-section">
    <div id="quiz-question-wrap">
      <p id="quiz-question"></p>
    </div>
    <div id="quiz-options"></div>
  </section>

  <!-- â”€â”€ Section: RESULT (ê²°ê³¼) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="section-result" class="game-section">
    <div class="result-emoji">ğŸ†</div>
    <div class="result-title">ê²Œì„ ì™„ë£Œ!</div>
    <div id="result-score">0 / 0</div>
    <div id="result-msg"></div>
    <div class="result-actions" style="margin-top:16px;">
      <button id="btn-play-again" class="btn btn-primary">ğŸ”„ ë‹¤ì‹œí•˜ê¸°</button>
      <button id="btn-download-log-result" class="btn btn-secondary"
              onclick="MemoryLogger.downloadLogs()">ğŸ“¥ ë¡œê·¸ ì €ì¥</button>
    </div>
  </section>

  <!-- â”€â”€ Gaze Dot Overlay Canvas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <canvas id="gaze-canvas"></canvas>

  <!-- â”€â”€ ì¬ì‹œë„ ë²„íŠ¼ (ì—ëŸ¬ ì‹œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <button id="btn-retry" class="btn btn-danger">ğŸ”„ ë‹¤ì‹œ ì‹œë„</button>

  <!-- â”€â”€ Status Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="status-text">ì¤€ë¹„ ì¤‘...</div>

</div><!-- /#app -->

<!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Scripts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<!--
  ë¡œë“œ ìˆœì„œ:
  1. memory-logger.js   â† ê°€ì¥ ë¨¼ì € (ì—ëŸ¬ ìºì¹˜ ì¤€ë¹„)
  2. easy-seeso.js      â† SeeSo SDK ë˜í¼
  3. passage-data.js    â† ê²Œì„ ì½˜í…ì¸ 
  4. seeso-manager.js   â† SDK ë§¤ë‹ˆì € (EasySeeso ì˜ì¡´)
  5. game.js            â† ê²Œì„ ë¡œì§ (ìœ„ ëª¨ë‘ ì˜ì¡´)
-->
<script src="memory-logger.js"></script>
<script type="module">
  // SeeSo SDKëŠ” ES Moduleë¡œ export
  import EasySeeso from './easy-seeso.js';
  window.EasySeeso = EasySeeso;

  // SDK ë¡œë“œ ì™„ë£Œ í›„ ë‚˜ë¨¸ì§€ ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë“œ
  function loadScript(src) {
    return new Promise((resolve, reject) => {
      const s = document.createElement('script');
      s.src = src;
      s.onload = resolve;
      s.onerror = reject;
      document.body.appendChild(s);
    });
  }

  (async () => {
    try {
      await loadScript('passage-data.js');
      await loadScript('seeso-manager.js');
      await loadScript('game.js');
      MemoryLogger.info('BOOT', 'All scripts loaded successfully');
    } catch(e) {
      MemoryLogger.error('BOOT', 'Script load failed', { msg: e.message });
    }
  })();
</script>

</body>
</html>
